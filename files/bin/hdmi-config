#!/bin/sh
# https://frdmtoplay.com/i3-udev-xrandr-hotplugging-output-switching/
# $ cat /etc/udev/rules.d/98-monitor-hotplug.rules 
# KERNEL=="card0", SUBSYSTEM=="drm", ACTION=="change", ENV{DISPLAY}=":0", RUN+="/home/breno/bin/hdmi-config"

set -e

egrep "^connected$" /sys/class/drm/*HDMI*/status
HDMI_STATUS=$?

if [[ $HDMI_STATUS -eq 0 ]]; then
    notify-send -t 5000 "HDMI CONNECTED"
    xrandr \
        --output DP-1 --off \
        --output eDP-1 --mode 1920x1080 --pos 1920x0 --rotate normal \
        --output HDMI-1 --off --output HDMI-1-2 --primary --mode 1920x1080 --pos 0x0 --rotate normal
else
    notify-send -t 5000 "HDMI OFF"
    xrandr \
        --output DP-1 --off --output HDMI-1 --off --output HDMI-1-2 --off \
        --output eDP-1 --primary --mode 1920x1080 --pos 0x0 --rotate normal
fi
