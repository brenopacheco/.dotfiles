# CONFIGURATIONS ============================================================
set-option -s exit-unattached off # If enabled, the server will exit when there are no attached clients.
set-option -g exit-empty off      # If enabled (the default), the server will exit when there are no active sessions.
set-option -g base-index 1        # Set the base index from which an unused index should be searched when a new window is created.  The default is zero.
set-option -g pane-base-index 1   # Like base-index, but set the starting index for pane numbers.

# HOOKS =====================================================================
# set-hook -g 'client-detached' 'run "echo DETACH >> /tmp/tmux.log"'
# set-hook -g 'client-attached' 'run "notify-send \"tmux\" \"lorem\""; echo "client attached to session " >> /tmp/tmux.log"'
# set-hook -g client-attached 'display-message hi'
# set-hook -g client-attached 'display-message hi'


set-hook -g client-attached "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
set-hook -g client-detached "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
set-hook -g client-session-changed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
set-hook -g session-created "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
set-hook -g session-closed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
set-hook -g session-renamed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"


# set-hook -g after-client-attached "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
# set-hook -g after-client-detached "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
# set-hook -g after-client-session-changed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
# set-hook -g after-session-created "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
# set-hook -g after-session-closed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"
# set-hook -g after-session-renamed "run-shell 'echo -e ''++++ #{hook}\\\\n  client_name: #{client_name}\\\\n  client_pid: #{client_pid}\\\\n  client_session: #{client_session}\\\\n  hook: #{hook}\\\\n  hook_session: #{hook_session}\\\\n  hook_session_name: #{hook_session_name}\\\\n  host: #{host}\\\\n  pid: #{pid}\\\\n  session_group: #{session_group}\\\\n  session_id: #{session_id}\\\\n  session_name: #{session_name}\\\\n  socket_path: #{socket_path}\\\\n'' >> /tmp/tmux.hooks.log'"




# KEYMAPS ===================================================================
unbind C-b
set-option -g prefix Delete
bind-key x kill-pane
bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"
bind-key f display-popup -E "~/bin/tmux-fzf"

# bind-key -T root  x if -F "#{==:#{pane_mode},tree-mode}" kill-window
# bind-key -T root  d if -F "#{==:#{pane_mode},tree-mode}" kill-window

# bind-key f display-popup -E "\
#     tmux list-sessions -F '#{?session_attached,,#{session_name}}' |\
#     sed '/^$/d' |\
#     fzf --reverse --header jump-to-session --preview 'tmux capture-pane -pt {}'  |\
#     xargs tmux switch-client -t"
